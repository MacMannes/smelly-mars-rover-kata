# Technical Debt

## Mikado plan

- [x] Fix lint errors
  - [x] `@typescript-eslint/prefer-for-of`
  - [x] `@typescript-eslint/no-inferrable-types`
- [ ] Make code more readable
  - [x] Remove comment in `RoverState` class
  - [-] Add eslint rule to disallow unused variables/functions
    - **NOTE** Not possible; only private methods are checked for usage
  - [x] Remove unused method `G()`
  - [x] Use meaningful names
    - [x] Class `Rover`
      - [x] `rs`: `state`
      - [x] `pos()`: `reportPosition()`
        - [x] inline method `XYD()`
        - [x] remove `XYD()` method
      - [x] In constructor:
        - [x] `p` -> `initialState`
        - [x] `s` -> `stateParameters`
      - [x] Method `go()`
        - [x] `cms`: `commands`
        - [x] `c`: `command`
    - [x] Class `RoverState`
      - [x] `xx` -> `x`
      - [x] `yy` -> `y`
      - [x] `dd` -> `direction`
  - [ ] Fix code Smells
    - [x] Fix SonarQube issues
      - [x] `rs` is never reassigned; mar as `readonly`
      - [x] Remove duplicated code
        - [x] Extract method `turnLeft()`
        - [x] Extract method `turnRight()`
        - [x] Introduce Union Type `Direction`
        - [x] Change `Roverstate.direction` to be of type `Direction`
          - [x] Add method determine if a state is a valid direction
          - [x] Add test to handle invalid direction in Rover constructor
        - [x] Change every other usage of `RoverState.direction` to be of type
              `Direction`
        - [x] Replace `if`/`else` with lookup table
    - [x] Remove cognitive complexity
      - [x] Extract method `moveForward()`
      - [x] Extract method handleCommand()`
      - [x] remove `else` statements
    - [x] Feature envy
      - [x] Move and/or delegate appropriate methods to `RoverState`
      - [x] `rotate()`
      - [x] `turnLeft()`
      - [x] `turnRight()`
      - [x] `moveForward()`
      - [x] In `handleCommand()` move manipulation of `this.state.direction` to
            `RoverState`
      - [x] Make members of RoverState private
        - [x] Remove `direction` parameter from `turnLeft`/`turnRight` methods
              in `RoverState`
          - [x] Remove `direction` parameter from `RoverState.rotate` method
          - [x] Remove `direction` parameter from `Rover.turnLeft` method
          - [x] Remove `direction` parameter from `Rover.turnRight` method
        - [x] Inline methods `turnLeft`/`turnRight`/`moveForward` in `Rover`
        - [x] Add constructor to `RoverState` to set `x`, `y`, and `direction`
        - [x] Add default values to `RoverState` constructor
        - [x] Use `RoverState.fromString()` in `Rover` class
          - [x] Use early return in `Rover` constructor
          - [x] introduce `static fromString` method in `RoverState`
        - [x] Introduce toString method in `RoverState` and use it
    - [x] Data clumps
      - [x] Introduce `Position` class
      - [x] Copy method `moveForward` to `Position` class
      - [x] Replace `x` and `y` in `RoverState` with `Position`
      - [x] Use `Position.moveForward` in `RoverState`
      - [x] Use `Position.toString` in `RoverState`
    - [ ] Primitive obsession
      - [ ] Rename `Direction` to `DirectionType`
      - [ ] Introduce `Direction` class
      - [ ] Move method `rotate` to `Direction` class
      - [ ] Add `toString` method to `Direction` class
